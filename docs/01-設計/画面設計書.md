# 画面設計書

## 画面一覧

1. [ダッシュボード](#ダッシュボード) - index.html
2. [企業管理](#企業管理) - companies.html
3. [送信管理](#送信管理) - send.html
4. [NGリスト](#ngリスト) - ng-list.html
5. [ログ閲覧](#ログ閲覧) - logs.html
6. [設定](#設定) - settings.html

## 共通要素

### ナビゲーションバー
- **ブランドロゴ**: FC-CRM System
- **メニュー項目**:
  - ダッシュボード (bi-speedometer2)
  - 企業管理 (bi-building)
  - 送信管理 (bi-send)
  - NGリスト (bi-shield-x)
  - ログ閲覧 (bi-file-text)
  - 設定 (bi-gear)
- **ユーザー情報**: 管理者表示

### 共通スタイル
- **フレームワーク**: Bootstrap 5.3
- **アイコン**: Bootstrap Icons
- **カラーテーマ**:
  - Primary: #0d6efd
  - Success: #198754
  - Warning: #ffc107
  - Danger: #dc3545

## ダッシュボード

### 画面概要
システムの全体状況を一覧できるメイン画面

### レイアウト構成

#### 統計カード（上部4分割）
1. **登録企業数**
   - カラー: Primary（青）
   - アイコン: bi-building
   - 値: アクティブ企業のみ

2. **今日の送信数**
   - カラー: Success（緑）
   - アイコン: bi-send
   - 値: 本日の実績

3. **成功率**
   - カラー: Warning（黄）
   - アイコン: bi-graph-up
   - 値: 今月の実績（%）

4. **ChatGPT使用量**
   - カラー: Info（水色）
   - アイコン: bi-robot
   - 値: 今月のトークン数

#### メインコンテンツ（2分割）

**左側: 今日の送信スケジュール**
- カードヘッダー: アイコン + タイトル + 更新ボタン
- 内容: 時刻、企業名、件名、詳細ボタン
- 状態: 読み込み中、空、エラー

**右側: 最近の送信履歴**
- カードヘッダー: アイコン + タイトル + 全て見るリンク
- 内容: ステータスバッジ、企業名、件名、日時
- 最大5件表示

#### システム状態（下部）
- データベース: 緑●/赤● + 状態テキスト
- APIサーバー: 緑●/赤● + 状態テキスト
- ChatGPT API: 緑●/黄●/赤● + 状態テキスト

### 機能説明
- **リアルタイム更新**: 30秒間隔でシステム状態チェック
- **データ読み込み**: ページ読み込み時に統計情報取得
- **エラーハンドリング**: 各セクション独立してエラー表示

## 企業管理

### 画面概要
企業情報のCRUD操作を行う画面

### レイアウト構成

#### ページヘッダー
- タイトル: 企業管理
- 新規登録ボタン: モーダル起動

#### フィルター・検索エリア
- **カテゴリ**: ドロップダウン（全て/メイン/サブ/テスト/停止中）
- **ステータス**: ドロップダウン（全て/アクティブ/非アクティブ/ブロック）
- **検索**: テキスト入力（企業名・ドメイン部分検索）
- **リセット**: フィルター初期化

#### 企業一覧テーブル
- **ヘッダー**:
  - 企業一覧 + 件数バッジ
  - 表示件数選択（20/50/100）

- **カラム**:
  - 企業名
  - ドメイン
  - 業界
  - カテゴリ（カラーバッジ）
  - 優先度（1-5、色分け）
  - ステータス（カラーバッジ）
  - 最終コンタクト日
  - 操作（編集/削除ボタン）

- **ページネーション**: Bootstrap標準

### モーダル

#### 企業登録・編集モーダル
- **基本情報**:
  - 企業名（必須）
  - ドメイン（必須、重複チェック）
  - 業界
  - 問い合わせフォームURL

- **分類・設定**:
  - カテゴリ（4択）
  - 優先度（1-5）
  - ステータス（3択）
  - reCAPTCHAチェックボックス

- **その他**:
  - 備考（テキストエリア）

#### 削除確認モーダル
- 企業名表示
- 警告メッセージ
- 送信履歴がある場合の注意

### 機能説明
- **リアルタイム検索**: デバウンス500ms
- **バリデーション**: フロントエンド + バックエンド
- **エラー表示**: フィールド単位 + トースト通知

## 送信管理

### 画面概要
メッセージ送信の管理・実行画面

### レイアウト構成

#### 送信設定エリア
- **対象企業選択**:
  - カテゴリフィルター
  - 個別選択チェックボックス
  - 一括選択

- **メッセージ設定**:
  - テンプレート選択
  - カスタムメッセージ入力
  - プレビュー機能

- **送信オプション**:
  - 送信間隔設定
  - 送信時刻指定
  - テスト送信

#### 送信キュー
- 送信予定一覧
- ステータス表示
- 個別キャンセル機能

### 機能説明
- **ChatGPT連携**: メッセージ自動生成
- **スケジューリング**: 時刻指定送信
- **進捗表示**: リアルタイム更新

## NGリスト

### 画面概要
送信除外対象の管理画面

### レイアウト構成

#### NGリスト管理
- **追加フォーム**:
  - タイプ選択（ドメイン/キーワード/メール）
  - 値入力
  - 理由入力

- **一覧テーブル**:
  - タイプ
  - 値
  - 理由
  - 追加日
  - ステータス
  - 操作

### 機能説明
- **重複チェック**: 同一値の登録防止
- **一括インポート**: CSVファイル対応
- **適用状況**: 参照企業数表示

## ログ閲覧

### 画面概要
各種ログの閲覧・分析画面

### レイアウト構成

#### ログタブ
1. **送信履歴**
2. **APIログ**
3. **ChatGPTログ**
4. **システムログ**

#### フィルター
- 日付範囲
- ステータス
- 企業指定
- ログレベル

#### ログ一覧
- タイムスタンプ
- レベル/ステータス
- メッセージ
- 詳細データ（JSON）

### 機能説明
- **エクスポート**: CSV/JSON形式
- **リアルタイム更新**: 新着ログ表示
- **詳細表示**: モーダルで展開

## 設定

### 画面概要
システム設定の管理画面

### レイアウト構成

#### 設定カテゴリ
1. **ChatGPT設定**
   - APIキー（暗号化表示）
   - モデル選択
   - 温度・トークン設定

2. **送信設定**
   - 日次送信限界
   - 送信間隔
   - 送信者情報

3. **システム設定**
   - ログレベル
   - バックアップ設定
   - メンテナンスモード

4. **通知設定**
   - エラー通知
   - 実行完了通知
   - 週次レポート

### 機能説明
- **即座反映**: 一部設定は即座に適用
- **設定検証**: 保存前にテスト実行
- **バックアップ**: 設定変更前の自動バックアップ

## レスポンシブ対応

### ブレークポイント
- **Large (≥992px)**: デスクトップレイアウト
- **Medium (≥768px)**: タブレットレイアウト
- **Small (<768px)**: モバイルレイアウト

### モバイル対応
- ナビゲーション: ハンバーガーメニュー
- テーブル: 横スクロール
- モーダル: フルスクリーン
- カード: 縦積み

## アクセシビリティ

### 対応項目
- **キーボード操作**: Tab順序、Enter/Space対応
- **スクリーンリーダー**: aria-label, role属性
- **色覚対応**: アイコン併用、十分なコントラスト
- **フォントサイズ**: 相対単位使用

## ブラウザ対応

### 対象ブラウザ
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 必要機能
- ES6+ JavaScript
- CSS Grid/Flexbox
- Fetch API
- Web Storage API

## 関連ドキュメント
- [[API仕様書]] - バックエンド連携仕様
- [[データベース設計]] - データ構造
- [[システム設計書#フロントエンド]] - アーキテクチャ